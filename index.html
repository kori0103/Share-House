<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì´ìƒí•œ í•˜ìš°ìŠ¤ë©”ì´íŠ¸</title>

  <style>
    :root { font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif; }
    body { margin: 0; background: #0b0d12; color: #e8e9ef; }
    .wrap { max-width: 720px; margin: 0 auto; padding: 16px; }
    .card { background: #141826; border: 1px solid #222842; border-radius: 16px; padding: 16px; }
    .title { font-size: 18px; font-weight: 800; }
    .meta { display: flex; gap: 8px; flex-wrap: wrap; font-size: 13px; margin-top: 6px; }
    .pill { background: #1b2140; border: 1px solid #2a3470; padding: 6px 10px; border-radius: 999px; }
    .log { margin-top: 12px; line-height: 1.7; white-space: pre-wrap; }
    .btns { display: grid; gap: 10px; margin-top: 14px; }
    button {
      border: 1px solid #2a3470; background: #1b2140; color: #e8e9ef;
      padding: 14px; border-radius: 14px; font-size: 16px;
      cursor: pointer; width: 100%;
    }
    .logo { width: 90%; max-width: 520px; display:block; margin:20px auto; }
    .center { text-align:center; }
  </style>
</head>

<body>

<!-- íƒ€ì´í‹€ -->
<div id="title" class="wrap">
  <div class="card center">
    <img src="logo.png" class="logo" alt="ì´ìƒí•œ í•˜ìš°ìŠ¤ë©”ì´íŠ¸">
    <button onclick="startGame()">ì‹œì‘í•˜ê¸°</button>
    <div style="opacity:.8;margin-top:8px;">ğŸŒ¾ ì‹œê³¨ ì‰ì–´í•˜ìš°ìŠ¤ì—ì„œ ì¸ì™¸ë“¤ê³¼ í•¨ê»˜</div>
  </div>
</div>

<!-- ê²Œì„ -->
<div id="game" class="wrap" style="display:none;">
  <div class="card">
    <div class="title">ğŸŒ¾ ì‹œê³¨ ì‰ì–´í•˜ìš°ìŠ¤: ì¸ì™¸ì™€ í•¨ê»˜</div>
    <div class="meta" id="meta"></div>
    <div class="log" id="log"></div>
    <div class="btns" id="choices"></div>
  </div>
</div>

<script>
/* =====================
   ê¸°ë³¸ ìƒíƒœ
===================== */
const state = {
  day: 1,
  phase: "intro", // intro â†’ morning â†’ midday â†’ evening â†’ night â†’ day2_dawn
  affinity: { ì•ŒíŒŒ:0, ì¹´ì´:0, ì˜¤í† ë¦¬:0 },
  log: [],
  choice: null
};

const $ = id => document.getElementById(id);
const narr = t => state.log.push(t);
const say = (n,t) => state.log.push(`${n}: ${t}`);
const addAff = (n,v) => state.affinity[n]+=v;

/* =====================
   ë Œë”
===================== */
function render(){
  $("meta").innerHTML = `
    <div class="pill">ğŸ“… ${state.day}ì¼ì°¨</div>
    <div class="pill">ğŸ’¬ ì•ŒíŒŒ ${state.affinity.ì•ŒíŒŒ}</div>
    <div class="pill">ğŸ’¬ ì¹´ì´ ${state.affinity.ì¹´ì´}</div>
    <div class="pill">ğŸ’¬ ì˜¤í† ë¦¬ ${state.affinity.ì˜¤í† ë¦¬}</div>
  `;
  $("log").textContent = state.log.join("\n\n");
  const c = $("choices");
  c.innerHTML = "";

  if(state.choice){
    state.choice.forEach(o=>{
      const b=document.createElement("button");
      b.textContent=o.text;
      b.onclick=()=>{ state.choice=null; o.run(); render(); };
      c.appendChild(b);
    });
  } else {
    const b=document.createElement("button");
    b.textContent="ê³„ì†";
    b.onclick=()=>{ advance(); render(); };
    c.appendChild(b);
  }

  window.scrollTo(0, document.body.scrollHeight);
}

/* =====================
   ì‹œì‘
===================== */
function startGame(){
  $("title").style.display="none";
  $("game").style.display="block";
  intro();
  render();
}

/* =====================
   1ì¼ì°¨
===================== */
function intro(){
  narr("ì•„ì¹¨ í–‡ì‚´ì´ ì°½ë¬¸ í‹ˆìœ¼ë¡œ ìŠ¤ë©°ë“ ë‹¤.");
  narr("ì˜¤ëŠ˜ë¶€í„°, ì´ ì‹œê³¨ ì‰ì–´í•˜ìš°ìŠ¤ì—ì„œì˜ ìƒí™œì´ ì‹œì‘ëœë‹¤.");
  say("ìœ ì´","â€¦ì˜ ì§€ë‚¼ ìˆ˜ ìˆê² ì§€.");
  state.phase="morning";
}

function morning(){
  state.choice=[
    {text:"ì•ŒíŒŒì—ê²Œ ì¸ì‚¬í•œë‹¤",run(){ say("ì•ŒíŒŒ","ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤."); addAff("ì•ŒíŒŒ",1);} },
    {text:"ì¹´ì´ë¥¼ ë¶€ë¥¸ë‹¤",run(){ say("ì¹´ì´","ì‘, ì—¬ê¸° ìˆì–´."); addAff("ì¹´ì´",1);} },
    {text:"ì˜¤í† ë¦¬ì—ê²Œ ë§ ê±´ë‹¤",run(){ say("ì˜¤í† ë¦¬","ì˜¤ëŠ˜ ë°”ëŒì´ ì¢‹ì•„ìš”!"); addAff("ì˜¤í† ë¦¬",1);} }
  ];
}

function nightEnd(){
  narr("ë°¤ì´ ê¹Šì–´ê°„ë‹¤.");
  narr("â€¦ê·¸ë¦¬ê³ , ìƒˆë²½.");
  state.day=2;
  state.phase="day2_dawn";
}

/* =====================
   2ì¼ì°¨ ìƒˆë²½
===================== */
function day2Dawn(){
  narr("ì§‘ ì•ˆì´ ê³ ìš”í•˜ë‹¤.");
  narr("ì–´ë”˜ê°€ì—ì„œ í•œìˆ¨ê³¼ ì¤‘ì–¼ê±°ë¦¼ì´ ë“¤ë¦°ë‹¤.");

  state.choice=[
    {text:"ì•ŒíŒŒì˜ ë°©ìœ¼ë¡œ ê°„ë‹¤",run(){
      narr("ì•ŒíŒŒì˜ ë°©ì—ëŠ” í¬ë¯¸í•œ ë¶ˆë¹›ì´ ë‚¨ì•„ ìˆë‹¤.");
      say("ì•ŒíŒŒ","ì¸ê°„ì˜ ê°ì •ì€â€¦ ì´í•´í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.");
      addAff("ì•ŒíŒŒ",3);
    }},
    {text:"ì¹´ì´ì˜ ë°©ìœ¼ë¡œ ê°„ë‹¤",run(){
      narr("ë³´ì´ì§€ ì•ŠëŠ” ì¡´ì¬ì˜ ìˆ¨ì†Œë¦¬ê°€ ëŠê»´ì§„ë‹¤.");
      say("ì¹´ì´","ì‚¬ëŒë“¤ì€ ë‚´ê°€ ì—†ëŠ” ì¤„ ì•Œì•„.");
      addAff("ì¹´ì´",3);
    }},
    {text:"ì˜¤í† ë¦¬ì˜ ë°©ìœ¼ë¡œ ê°„ë‹¤",run(){
      narr("ë³ì§š ëƒ„ìƒˆì™€ ë‹¬ë¹›.");
      say("ì˜¤í† ë¦¬","ì €ëŠ” ì–´ë””ì—ë„ ì†í•˜ì§€ ëª»í•´ìš”.");
      addAff("ì˜¤í† ë¦¬",3);
    }}
  ];
}

/* =====================
   ì§„í–‰ ì œì–´
===================== */
function advance(){
  switch(state.phase){
    case "morning": morning(); state.phase="midday"; break;
    case "midday": narr("í•˜ë£¨ê°€ ëŠë¦¬ê²Œ í˜ëŸ¬ê°„ë‹¤."); state.phase="evening"; break;
    case "evening": narr("ì‹íƒì— ì˜¨ê¸°ê°€ ë‚¨ëŠ”ë‹¤."); state.phase="night"; break;
    case "night": nightEnd(); break;
    case "day2_dawn": day2Dawn(); state.phase="done"; break;
    default: narr("â€¦ì´ì•¼ê¸°ëŠ” ì—¬ê¸°ì„œ ì ì‹œ ë©ˆì¶˜ë‹¤.");
  }
}
</script>

</body>
</html>
