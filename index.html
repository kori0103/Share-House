<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì´ìƒí•œ í•˜ìš°ìŠ¤ë©”ì´íŠ¸</title>

  <style>
    :root { font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif; }
    body { margin: 0; background: #0b0d12; color: #e8e9ef; }
    .wrap { max-width: 720px; margin: 0 auto; padding: 16px; }
    .card { background: #141826; border: 1px solid #222842; border-radius: 16px; padding: 16px; box-shadow: 0 8px 24px rgba(0,0,0,.35); }
    .title { font-size: 18px; font-weight: 800; margin: 0 0 8px; }
    .meta { display: flex; gap: 10px; flex-wrap: wrap; font-size: 13px; opacity: .9; margin-top: 6px; }
    .pill { background: #1b2140; border: 1px solid #2a3470; padding: 6px 10px; border-radius: 999px; }
    .log { margin-top: 12px; line-height: 1.7; white-space: pre-wrap; }
    .btns { display: grid; gap: 10px; margin-top: 14px; }
    button{
      border: 1px solid #2a3470; background: #1b2140; color: #e8e9ef;
      padding: 14px; border-radius: 14px; font-size: 16px;
      cursor: pointer; touch-action: manipulation;
      width: 100%;
    }
    button:active { transform: translateY(1px); }
    .row { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; }
    .ghost { background: transparent; border: 1px solid #2a3470; }
    .small { font-size: 13px; opacity: .85; margin-top: 10px; }
    .center { text-align: center; }
    .logo { width: 90%; max-width: 520px; margin: 22px auto 18px; display: block; border-radius: 16px; }
  </style>
</head>

<body>

  <!-- íƒ€ì´í‹€ í™”ë©´ -->
  <div id="title" class="wrap">
    <div class="card center">
      <img src="logo.png" class="logo" alt="ì´ìƒí•œ í•˜ìš°ìŠ¤ë©”ì´íŠ¸ ë¡œê³ ">
      <button id="btnStart">ì‹œì‘í•˜ê¸°</button>
      <div class="small">ğŸŒ¾ ì‹œê³¨ ì‰ì–´í•˜ìš°ìŠ¤ì—ì„œ ì¸ì™¸ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì´ì•¼ê¸°</div>
    </div>
  </div>

  <!-- ê²Œì„ í™”ë©´ -->
  <div id="game" class="wrap" style="display:none;">
    <div class="card">
      <h1 class="title">ğŸŒ¾ ã€ˆì‹œê³¨ ì‰ì–´í•˜ìš°ìŠ¤: ì¸ì™¸ì™€ í•¨ê»˜ã€‰</h1>

      <div class="meta" id="meta"></div>
      <div class="log" id="log"></div>
      <div class="btns" id="choices"></div>

      <div class="row">
        <button class="ghost" id="btnSave">ì €ì¥</button>
        <button class="ghost" id="btnLoad">ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button class="ghost" id="btnRestart">ì²˜ìŒë¶€í„°</button>
      </div>

      <div class="small">ì €ì¥ì€ ì´ ê¸°ê¸° ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤(localStorage).</div>
    </div>
  </div>

  <script>
    // ====== ìƒíƒœ ======
    const STORAGE_KEY = "sharehouse_save_v1";

    const state = {
      day: 1,
      slot: 0, // 0 ì•„ì¹¨, 1 ë‚®, 2 ì €ë…, 3 ë°¤
      affinity: { "ì•ŒíŒŒ": 0, "ì¹´ì´": 0, "ì˜¤í† ë¦¬": 0 },
      flags: {
        met_alpha_deep: false,
        met_kai_deep: false,
        met_otori_deep: false,
        _morningStarted: false,
        _middayStarted: false,
        _eveningStarted: false,
        _nightStarted: false,
      },
      log: [],
      awaitingChoice: null,
    };

    const TIME = ["ì•„ì¹¨", "ë‚®", "ì €ë…", "ë°¤"];
    const $ = (id) => document.getElementById(id);

    function narr(text){ state.log.push(text); }
    function say(name, text){ state.log.push(`${name}: ${text}`); }
    function addAffinity(who, delta){ state.affinity[who] = (state.affinity[who] ?? 0) + delta; }

    function setChoice(prompt, options){
      state.awaitingChoice = { prompt, options };
    }
    function clearChoices(){ state.awaitingChoice = null; }

    function render(){
      $("meta").innerHTML = `
        <div class="pill">ğŸ“… ${state.day}ì¼ì°¨</div>
        <div class="pill">â° ${TIME[state.slot] ?? "â€”"}</div>
        <div class="pill">ğŸ’¬ ì•ŒíŒŒ ${state.affinity["ì•ŒíŒŒ"]}</div>
        <div class="pill">ğŸ’¬ ì¹´ì´ ${state.affinity["ì¹´ì´"]}</div>
        <div class="pill">ğŸ’¬ ì˜¤í† ë¦¬ ${state.affinity["ì˜¤í† ë¦¬"]}</div>
      `;

      $("log").textContent = state.log.join("\n\n");

      const box = $("choices");
      box.innerHTML = "";

      if(state.awaitingChoice){
        const p = document.createElement("div");
        p.style.opacity = ".95";
        p.style.marginTop = "8px";
        p.textContent = state.awaitingChoice.prompt;
        box.appendChild(p);

        state.awaitingChoice.options.forEach((opt, i) => {
          const btn = document.createElement("button");
          btn.textContent = `${i+1}. ${opt.text}`;
          btn.onclick = () => {
            clearChoices();
            opt.run();
            autoSave();
            render();
          };
          box.appendChild(btn);
        });
      } else {
        const btn = document.createElement("button");
        btn.textContent = "ê³„ì†";
        btn.onclick = () => { advance(); autoSave(); render(); };
        box.appendChild(btn);
      }

      window.requestAnimationFrame(() => {
        window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
      });
    }

    function autoSave(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify({
        day: state.day,
        slot: state.slot,
        affinity: state.affinity,
        flags: state.flags,
        log: state.log,
      }));
    }

    function load(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return false;
      try{
        const data = JSON.parse(raw);
        state.day = data.day ?? 1;
        state.slot = data.slot ?? 0;
        state.affinity = data.affinity ?? { "ì•ŒíŒŒ":0, "ì¹´ì´":0, "ì˜¤í† ë¦¬":0 };
        state.flags = { ...state.flags, ...(data.flags ?? {}) };
        state.log = data.log ?? [];
        state.awaitingChoice = null;
        return true;
      }catch{
        return false;
      }
    }

    function restart(){
      state.day = 1;
      state.slot = 0;
      state.affinity = { "ì•ŒíŒŒ": 0, "ì¹´ì´": 0, "ì˜¤í† ë¦¬": 0 };
      state.flags = {
        met_alpha_deep: false,
        met_kai_deep: false,
        met_otori_deep: false,
        _morningStarted: false,
        _middayStarted: false,
        _eveningStarted: false,
        _nightStarted: false,
      };
      state.log = [];
      state.awaitingChoice = null;

      intro();
      morningChoice();
      autoSave();
      render();
    }

    // ====== ìŠ¤í† ë¦¬ ======
    function intro(){
      narr("ì•„ì¹¨ í–‡ì‚´ì´ ì°½ë¬¸ í‹ˆìœ¼ë¡œ ê¸¸ê²Œ ë“¤ì–´ì˜¨ë‹¤.");
      narr("ì‹œê³¨ íŠ¹ìœ ì˜ ëŠë¦° ê³µê¸°. ë¨¼ ê³³ì—ì„œ ë‹­ ìš°ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤.");
      say("ìœ ì´", "ì˜¤ëŠ˜ë¶€í„°â€¦ ì—¬ê¸°ì„œ ê°™ì´ ì‚¬ëŠ” ê±°ì§€.");
      narr("ê±°ì‹¤ ìª½ì—ì„œ ì¡°ìš©íˆ ì¸ê¸°ì²™ì´ ë‚œë‹¤.");
      narr("ê¸ˆì† ê´€ì ˆ ì†Œë¦¬, ë°”ë‹¥ì´ ì•„ì£¼ ì‚´ì§ ëˆŒë¦¬ëŠ” ëŠë‚Œ, ê·¸ë¦¬ê³ â€¦ ë³ì§š ëƒ„ìƒˆ.");
    }

    function morningChoice(){
      setChoice("ê±°ì‹¤ë¡œ ë‚˜ê°€ë©´â€¦", [
        { text: "ì•ŒíŒŒì—ê²Œ ë¨¼ì € ì¸ì‚¬í•œë‹¤", run(){
            say("ìœ ì´", "ì•ŒíŒŒ, ì¢‹ì€ ì•„ì¹¨.");
            say("ì•ŒíŒŒ", "ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤, ìœ ì´. ì˜¤ëŠ˜ì˜ ì‹¤ë‚´ ìŠµë„ëŠ” ì–´ì œë³´ë‹¤ 7% ë‚®ìŠµë‹ˆë‹¤.");
            say("ìœ ì´", "â€¦ê·¸ ì •ë³´, ê³ ë§ˆì›Œ.");
            addAffinity("ì•ŒíŒŒ", +1);
          }
        },
        { text: "ì¹´ì´ê°€ ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•œë‹¤", run(){
            say("ìœ ì´", "ì¹´ì´? ì§€ê¸ˆâ€¦ ì—¬ê¸° ìˆì–´?");
            narr("ì ê¹ì˜ ì •ì . ê·¸ë¦¬ê³  ì•„ì£¼ ì‘ì€ ì›ƒìŒì†Œë¦¬.");
            say("ì¹´ì´", "ë“¤ì¼°ë„¤.");
            narr("ì˜ìê°€ ì‚´ì§ ì‚ê±±ì¸ë‹¤. ê±°ê¸° ì•‰ì•„ ìˆì—ˆë˜ ëª¨ì–‘ì´ë‹¤.");
            addAffinity("ì¹´ì´", +1);
          }
        },
        { text: "ì˜¤í† ë¦¬ì—ê²Œ â€˜ì¢‹ì€ ì•„ì¹¨â€™ì´ë¼ê³  ë§í•œë‹¤", run(){
            say("ìœ ì´", "ì˜¤í† ë¦¬, ì¢‹ì€ ì•„ì¹¨.");
            say("ì˜¤í† ë¦¬", "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! ì˜¤ëŠ˜ì€ ë°”ëŒì´ â€˜ë¶€ë“œëŸ¬ì›Œìš”â€™!");
            narr("ì˜¤í† ë¦¬ëŠ” ê¸°ë¶„ì´ ì¢‹ìœ¼ë©´ ë‹¨ì–´ë¥¼ ê¼­ ê¾¹ ëˆŒëŸ¬ ë§í•œë‹¤.");
            addAffinity("ì˜¤í† ë¦¬", +1);
          }
        },
      ]);
    }

    function middayChoice(){
      narr("ë‚®, ë§ˆì„ ë²„ìŠ¤ ì‹œê°„ì„ ë§ì¶° ì¥ì„ ë³´ëŸ¬ ê°€ê¸°ë¡œ í–ˆë‹¤.");
      setChoice("ëˆ„êµ¬ì™€ ê°™ì´ ê°ˆê¹Œìš”?", [
        { text: "ì•ŒíŒŒ", run(){
            narr("ì•ŒíŒŒëŠ” ì¥ë°”êµ¬ë‹ˆë¥¼ â€˜ìµœì  íš¨ìœ¨â€™ë¡œ ì±„ìš°ë ¤ í•œë‹¤.");
            say("ì•ŒíŒŒ", "ìœ ì´, ë™ì¼ ì˜ˆì‚°ìœ¼ë¡œ ë‹¨ë°±ì§ˆ ì„­ì·¨ëŸ‰ì„ 13% ì¦ê°€ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            say("ìœ ì´", "ì˜¤ëŠ˜ì€â€¦ ê·¸ëƒ¥ ë¨¹ê³  ì‹¶ì€ ê±¸ë¡œ í•˜ì.");
            narr("ì•ŒíŒŒëŠ” ì ê¹ ë©ˆì¶”ë”ë‹ˆ, ì•„ì£¼ ì‘ì€ ê³ ê°œ ë„ë•ì„ì„ í•œë‹¤.");
            addAffinity("ì•ŒíŒŒ", +2);
            state.flags.met_alpha_deep = true;
          }
        },
        { text: "ì¹´ì´", run(){
            narr("ì¹´ì´ì™€ í•¨ê»˜ ê±·ëŠ” ê¸¸ì€ ì¡°ê¸ˆ ì´ìƒí•˜ë‹¤.");
            narr("ì˜†ì— ë¶„ëª… ëˆ„êµ°ê°€ ìˆëŠ”ë°, ì‹œì„ ì€ ë¹ˆ ê³µê°„ì„ ë°”ë¼ë³´ê²Œ ëœë‹¤.");
            say("ìœ ì´", "ì‚¬ëŒë“¤ ì‹œì„ â€¦ í˜ë“¤ì§€ ì•Šì•„?");
            say("ì¹´ì´", "ê°€ë”ì€. ê·¼ë° ë„ˆëŠ”â€¦ ë‚˜ë¥¼ â€˜ìˆëŠ” ì‚¬ëŒâ€™ì²˜ëŸ¼ ë´ì£¼ì–ì•„.");
            narr("ê·¸ ë§ì´ ë¬˜í•˜ê²Œ ë”°ëœ»í•˜ê²Œ ë‚¨ëŠ”ë‹¤.");
            addAffinity("ì¹´ì´", +2);
            state.flags.met_kai_deep = true;
          }
        },
        { text: "ì˜¤í† ë¦¬", run(){
            narr("ì˜¤í† ë¦¬ëŠ” ì‹œì¥ êµ¬ê²½ ìì²´ë¥¼ ì¶•ì œì²˜ëŸ¼ ì¦ê¸´ë‹¤.");
            say("ì˜¤í† ë¦¬", "ì´ê±´â€¦ â€˜ì‚¬ëŒë“¤ì´ ì‚¬ëŠ” ëƒ„ìƒˆâ€™ì˜ˆìš”!");
            narr("ì˜¤í† ë¦¬ëŠ” ë‹¹ê·¼ì„ ë“¤ê³  â€˜ì™€ì•„â€™ í•˜ê³  ê°íƒ„í•œë‹¤.");
            say("ìœ ì´", "ë‹¹ê·¼ì´ ê·¸ë ‡ê²Œ ì¢‹ì•„?");
            say("ì˜¤í† ë¦¬", "ì¢‹ì•„ìš”! ì˜¤ë Œì§€ìƒ‰ì€ ë§ˆìŒì´ ë°°ë¶€ë¥¸ ìƒ‰ ê°™ì•„ìš”.");
            addAffinity("ì˜¤í† ë¦¬", +2);
            state.flags.met_otori_deep = true;
          }
        },
      ]);
    }

    function eveningChoice(){
      narr("ì €ë…. ë„¤ ì‚¬ëŒì˜ ì‹íƒì´ ì²˜ìŒìœ¼ë¡œ â€˜ê°™ì€ ì‹œê°„â€™ì— ë§ì¶°ì¡Œë‹¤.");
      narr("ë°¥, ëœì¥êµ­, ê·¸ë¦¬ê³ â€¦ ëˆ„êµ°ê°€ê°€ ê°€ì ¸ì˜¨ ì¡°ê° ì¼€ì´í¬ í•˜ë‚˜.");
      say("ìœ ì´", "ì¼€ì´í¬ëŠ”â€¦ ëˆ„ê°€ ìƒ€ì–´?");

      setChoice("ìœ ì´ëŠ” ì–´ë–»ê²Œ í• ê¹Œìš”?", [
        { text: "â€œê°™ì´ ë‚˜ëˆ  ë¨¹ì.â€ ìì—°ìŠ¤ëŸ½ê²Œ ì ‘ì‹œë¥¼ êº¼ë‚¸ë‹¤", run(){
            narr("ì ‘ì‹œë¥¼ êº¼ë‚´ëŠ” ì†Œë¦¬ê°€ ì˜¤ëŠ˜ì˜ â€˜ìš°ë¦¬â€™ë¥¼ ë§Œë“ ë‹¤.");
            addAffinity("ì•ŒíŒŒ", +1);
            addAffinity("ì¹´ì´", +1);
            addAffinity("ì˜¤í† ë¦¬", +1);
          }
        },
        { text: "â€œì´ê±´ ê¸°ë…ì´ë‹¤.â€ ì˜¤ëŠ˜ì„ ê¸°ë…í•˜ë©° ë¶„ìœ„ê¸°ë¥¼ ë§Œë“ ë‹¤", run(){
            say("ìœ ì´", "ì˜¤ëŠ˜ë¶€í„° ìš°ë¦¬ ê°™ì´ ì‚¬ëŠ” ê±°ì–ì•„. ê¸°ë…í•˜ì.");
            say("ì˜¤í† ë¦¬", "ê¸°ë…â€¦! ì¢‹ì•„ìš”!");
            narr("ì•ŒíŒŒëŠ” ì´›ë¶ˆì˜ í”ë“¤ë¦¼ì„ ì˜¤ë˜ ë°”ë¼ë³¸ë‹¤.");
            narr("ì¹´ì´ëŠ” ì•„ë¬´ ë§ì´ ì—†ì§€ë§Œ, ì˜ìê°€ ì•„ì£¼ ì¡°ê¸ˆ ê°€ê¹Œì›Œì§„ë‹¤.");
            addAffinity("ì˜¤í† ë¦¬", +2);
            addAffinity("ì•ŒíŒŒ", +1);
            addAffinity("ì¹´ì´", +1);
          }
        },
        { text: "â€œì†”ì§íˆ ë§í•´ì¤˜.â€ ëˆ„ê°€ ì‚° ê±´ì§€ ê¼­ ì•Œê³  ì‹¶ë‹¤", run(){
            say("ìœ ì´", "ì†”ì§íˆ ë§í•´ì¤˜. ëˆ„ê°€ ì‚° ê±°ì•¼?");
            narr("ì ê¹ì˜ ì •ì .");
            say("ì•ŒíŒŒ", "ìœ ì´ì˜ í˜ˆë‹¹ ë³€ë™ì´ ìµœê·¼ ë‚®ì•˜ìŠµë‹ˆë‹¤. ë³´ì •ì´ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.");
            say("ì¹´ì´", "â€¦ì•„ë‹ˆ, ë‚´ê°€ ìƒ€ì–´. ê·¸ëƒ¥â€¦ ë„¤ê°€ ì›ƒëŠ” ì–¼êµ´ì´ ë³´ê³  ì‹¶ì—ˆì–´.");
            say("ì˜¤í† ë¦¬", "ì €ë„â€¦ ê¸°ì¨ì„ ì£¼ê³  ì‹¶ì—ˆì–´ìš”â€¦");
            narr("ì„¸ ì‚¬ëŒì˜ ì´ìœ ê°€ ê²¹ì³ì ¸ì„œ, ìœ ì´ëŠ” ë” ë§ì´ ì•ˆ ë‚˜ì˜¨ë‹¤.");
            addAffinity("ì•ŒíŒŒ", +1);
            addAffinity("ì¹´ì´", +2);
            addAffinity("ì˜¤í† ë¦¬", +1);
          }
        },
      ]);
    }

    function nightChoice(){
      narr("ë°¤. ì‹œê³¨ì˜ ë°¤í•˜ëŠ˜ì€ ë„ì‹œë³´ë‹¤ í›¨ì”¬ ê¹Šë‹¤.");
      narr("ë§ˆë‹¹ì— ë‚˜ê°€ë©´, ë³„ì´ â€˜ì†Œë¦¬ ì—†ì´â€™ ìŸì•„ì§ˆ ê²ƒ ê°™ë‹¤.");

      setChoice("ëˆ„êµ¬ì™€ ë§ˆë‹¹ì— ì ê¹ ë‚˜ê°ˆê¹Œìš”?", [
        { text: "í˜¼ì", run(){
            narr("í˜¼ì ìˆëŠ” ì‹œê°„ë„ í•„ìš”í•˜ë‹¤. ìœ ì´ëŠ” ìˆ¨ì„ ê¸¸ê²Œ ë‚´ì‰°ë‹¤.");
            narr("â€¦ê·¸ë˜ë„, ì°½ë¬¸ ë„ˆë¨¸ë¡œ ëˆ„êµ°ê°€ì˜ ê¸°ì²™ì´ ëŠê»´ì§„ë‹¤.");
          }
        },
        { text: "ì•ŒíŒŒ", run(){
            say("ì•ŒíŒŒ", "ë³„ë¹›ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë§¤ìš° ì˜¤ë˜ëœ ì •ë³´ì…ë‹ˆë‹¤.");
            say("ìœ ì´", "ì˜¤ë˜ëœ ì •ë³´ë¼â€¦ ë©‹ì§„ ë§ì´ë„¤.");
            addAffinity("ì•ŒíŒŒ", +2);
          }
        },
        { text: "ì¹´ì´", run(){
            say("ì¹´ì´", "ë³„ ë³´ëŠ” ê±´â€¦ ë‚˜ë„ ì¢‹ì•„.");
            narr("ë³´ì´ì§€ ì•ŠëŠ” ì†ì´, ë‚œê°„ ìœ„ì— â€˜ìˆëŠ” ê²ƒì²˜ëŸ¼â€™ ë†“ì¸ë‹¤.");
            addAffinity("ì¹´ì´", +2);
          }
        },
        { text: "ì˜¤í† ë¦¬", run(){
            say("ì˜¤í† ë¦¬", "ë³„ì€â€¦ ë…¼ ìœ„ì—ì„œ ë³´ë˜ ê²ƒë³´ë‹¤ ë” ê°€ê¹Œì›Œìš”!");
            say("ìœ ì´", "ì§‘ì´ ìƒê¸°ë©´, í•˜ëŠ˜ë„ ë” ê°€ê¹Œì›Œì§€ëŠ” ê±¸ê¹Œ.");
            addAffinity("ì˜¤í† ë¦¬", +2);
          }
        },
      ]);
    }

    // ====== ì§„í–‰ ======
    function advance(){
      if(state.day === 1){
        if(state.slot === 0){
          if(!state.flags._morningStarted){
            state.flags._morningStarted = true;
            intro();
            morningChoice();
            return;
          } else {
            narr("ë¶€ì—Œì—ì„œëŠ” ë°¥ ì§“ëŠ” ëƒ„ìƒˆê°€ ë‚œë‹¤. ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë–¤ ìƒ‰ì¼ê¹Œ.");
            state.slot = 1;
            return;
          }
        }

        if(state.slot === 1){
          if(!state.flags._middayStarted){
            state.flags._middayStarted = true;
            middayChoice();
            return;
          } else {
            narr("ì‰ì–´í•˜ìš°ìŠ¤ë¡œ ëŒì•„ì˜¤ëŠ” ê¸¸, ë´‰ì§€ê°€ ì‚¬ê°ì‚¬ê° ì†Œë¦¬ë¥¼ ë‚¸ë‹¤.");
            state.slot = 2;
            return;
          }
        }

        if(state.slot === 2){
          if(!state.flags._eveningStarted){
            state.flags._eveningStarted = true;
            eveningChoice();
            return;
          } else {
            narr("ì‹íƒ ìœ„ì˜ ì¡°ìš©í•œ ì˜¨ê¸°ê°€, ì˜¤ëŠ˜ì„ â€˜ì‚´ì•˜ë˜ í•˜ë£¨â€™ë¡œ ë°”ê¾¼ë‹¤.");
            state.slot = 3;
            return;
          }
        }

        if(state.slot === 3){
          if(!state.flags._nightStarted){
            state.flags._nightStarted = true;
            nightChoice();
            return;
          } else {
            narr("ì˜¤ëŠ˜ í•˜ë£¨ê°€ ì¡°ìš©íˆ ì ‘íŒë‹¤.");
            narr("ğŸŒ™ 1ì¼ì°¨ ì¢…ë£Œ. (2ì¼ì°¨ëŠ” ì›í•˜ì‹œë©´ ë°”ë¡œ ì´ì–´ì„œ ë§Œë“¤ì–´ ë“œë¦´ê²Œìš”!)");
            state.slot = 4;
            return;
          }
        }
      }

      narr("íƒ€ì´í‹€ë¡œ ëŒì•„ê°€ë ¤ë©´ â€˜ì²˜ìŒë¶€í„°â€™ë¥¼ ëˆŒëŸ¬ ì£¼ì„¸ìš”.");
    }

    // ====== í™”ë©´ ì „í™˜ ======
    function startGame(){
      $("title").style.display = "none";
      $("game").style.display = "block";
      render();
    }

    // ====== ë²„íŠ¼ ======
    $("btnStart").onclick = () => startGame();

    $("btnSave").onclick = () => { autoSave(); alert("ì €ì¥í–ˆì–´ìš”!"); };
    $("btnLoad").onclick = () => {
      const ok = load();
      if(ok){ render(); alert("ë¶ˆëŸ¬ì™”ì–´ìš”!"); }
      else alert("ì €ì¥ ë°ì´í„°ê°€ ì—†ì–´ìš”.");
    };
    $("btnRestart").onclick = () => {
      if(confirm("ì²˜ìŒë¶€í„° ì‹œì‘í• ê¹Œìš”?")){
        $("game").style.display = "none";
        $("title").style.display = "block";
        restart();
      }
    };

    // ====== ì‹œì‘ ======
    // íƒ€ì´í‹€ í™”ë©´ì—ì„œëŠ” ìë™ ì‹œì‘í•˜ì§€ ì•ŠìŒ.
    // ì‹œì‘í•˜ê¸° ëˆŒë €ì„ ë•Œ ë¡œë“œ/ì¬ì‹œì‘ ì§„í–‰.
    load(); // ì €ì¥ ìˆìœ¼ë©´ ë¶ˆëŸ¬ë§Œ ë‘ (ì‹œì‘ì€ startGameì—ì„œ)
  </script>

</body>
</html>
