// ====== ì§„í–‰ ======
function advance(){
  if(state.day === 1){
    if(state.slot === 0){
      narr("ë¶€ì—Œì—ì„œëŠ” ë°¥ ì§“ëŠ” ëƒ„ìƒˆê°€ ë‚œë‹¤. ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë–¤ ìƒ‰ì¼ê¹Œ.");
      state.slot = 1;
      return;
    }

    if(state.slot === 1){
      if(!state.flags._middayStarted){
        state.flags._middayStarted = true;
        middayChoice();
        return;
      } else {
        narr("ì‰ì–´í•˜ìš°ìŠ¤ë¡œ ëŒì•„ì˜¤ëŠ” ê¸¸, ë´‰ì§€ê°€ ì‚¬ê°ì‚¬ê° ì†Œë¦¬ë¥¼ ë‚¸ë‹¤.");
        state.slot = 2;
        return;
      }
    }

    if(state.slot === 2){
      if(!state.flags._eveningStarted){
        state.flags._eveningStarted = true;
        eveningChoice();
        return;
      } else {
        narr("ì‹íƒ ìœ„ì˜ ì¡°ìš©í•œ ì˜¨ê¸°ê°€, ì˜¤ëŠ˜ì„ â€˜ì‚´ì•˜ë˜ í•˜ë£¨â€™ë¡œ ë°”ê¾¼ë‹¤.");
        state.slot = 3;
        return;
      }
    }

    if(state.slot === 3){
      if(!state.flags._nightStarted){
        state.flags._nightStarted = true;
        nightChoice();
        return;
      } else {
        narr("ğŸŒ™ 1ì¼ì°¨ ì¢…ë£Œ...");
        startDay2Dawn(); // âœ… ì—¬ê¸°ì„œ 2ì¼ì°¨ë¡œ ì´ë™
        return;
      }
    }
  }

  narr("íƒ€ì´í‹€ë¡œ ëŒì•„ê°€ë ¤ë©´ â€˜ì²˜ìŒë¶€í„°â€™ë¥¼ ëˆŒëŸ¬ ì£¼ì„¸ìš”.");
}
// ====== 2ì¼ì°¨ ìƒˆë²½ ======
function startDay2Dawn(){
  state.day = 2;
  state.slot = 3;
  state.flags._day2_started = true;

  narr("â€¦ê³ ìš”í•œ ìƒˆë²½.");
  narr("ì§‘ ì•ˆì´ ì§€ë‚˜ì¹˜ê²Œ ì¡°ìš©í•˜ë‹¤.");
  narr("ì–´ë”˜ê°€ì—ì„œ í•œìˆ¨ê³¼ ì¤‘ì–¼ê±°ë¦¼ì´ ë“¤ë¦°ë‹¤.");

  day2DawnChoice();
}

function day2DawnChoice(){
  setChoice("ì†Œë¦¬ê°€ ë“¤ë¦° ë°©ìœ¼ë¡œ ê°ˆê¹Œ?", [
    { text: "ì•ŒíŒŒì˜ ë°©", run(){ day2AlphaDawn(); } },
    { text: "ì¹´ì´ì˜ ë°©", run(){ day2KaiDawn(); } },
    { text: "ì˜¤í† ë¦¬ì˜ ë°©", run(){ day2OtoriDawn(); } },
  ]);
}

function day2AlphaDawn(){
  narr("ì•ŒíŒŒì˜ ë°©ì—ì„œ í¬ë¯¸í•œ ë¶ˆë¹›ì´ ìƒˆì–´ ë‚˜ì˜¨ë‹¤.");
  say("ì•ŒíŒŒ", "ê°ì •ì„ ê³„ì‚°í•  ìˆ˜ ì—†ì–´ì„œâ€¦ ì €ëŠ” ê³ ë¦½ë©ë‹ˆë‹¤.");

  addAffinity("ì•ŒíŒŒ", 3);
}

function day2KaiDawn(){
  narr("ë³´ì´ì§€ ì•ŠëŠ” ìˆ¨ì†Œë¦¬ê°€ ë°© ì•ˆì— ê°€ë“í•˜ë‹¤.");
  say("ì¹´ì´", "ì‚¬ëŒë“¤ì€ ë‚´ê°€ ì—†ëŠ” ì¤„ ì•Œì•„.");

  addAffinity("ì¹´ì´", 3);
}

function day2OtoriDawn(){
  narr("ë³ì§š ëƒ„ìƒˆì™€ ë‹¬ë¹›ì´ ì„ì¸ë‹¤.");
  say("ì˜¤í† ë¦¬", "ì €ëŠ” ì–´ë””ì—ë„ ì†í•˜ì§€ ëª»í•´ìš”.");

  addAffinity("ì˜¤í† ë¦¬", 3);
}
